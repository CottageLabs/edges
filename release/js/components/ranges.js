$.extend(edges,{newNumericRangeEntry:function(e){return e||(e={}),edges.NumericRangeEntry.prototype=edges.newSelector(e),new edges.NumericRangeEntry(e)},NumericRangeEntry:function(e){this.lower=void 0===e.lower?!1:e.lower,this.upper=void 0===e.upper?!1:e.upper,this.increment=e.increment||1,this.defaultRenderer=e.defaultRenderer||"newNumericRangeEntryRenderer",this.from=!1,this.to=!1,this.init=function(e){if(edges.newSelector().init.call(this,e),!this.lower||!this.upper){var t=this.edge.cloneBaseQuery();t.clearAggregations(),t.size=0,t.addAggregation(es.newStatsAggregation({name:this.id,field:this.field})),es.doQuery({search_url:this.edge.search_url,queryobj:t.objectify(),datatype:this.edge.datatype,success:edges.objClosure(this,"querySuccess",["result"]),error:edges.objClosure(this,"queryFail")})}},this.synchronise=function(){if(this.from=this.lower,this.to=this.upper,this.edge.currentQuery)for(var e=this.edge.currentQuery.listMust(es.newRangeFilter({field:this.field})),t=0;t<e.length;t++)this.to=e[t].lt,this.from=e[t].gte},this.querySuccess=function(e){var t=e.result,i=t.aggregation(this.id);this.lower===!1&&(this.lower=i.min),this.upper===!1&&(this.upper=i.max),this.draw()},this.queryFail=function(e){this.lower===!1&&(this.lower=0),this.upper===!1&&(this.upper=0)},this.selectRange=function(e,t){var i=this.edge.cloneQuery();i.removeMust(es.newRangeFilter({field:this.field})),(e!==this.lower||t!==this.upper)&&i.addMust(es.newRangeFilter({field:this.field,gte:e,lt:t})),i.from=0,this.edge.pushQuery(i),this.edge.doQuery()}},newMultiDateRangeEntry:function(e){return e||(e={}),edges.MultiDateRangeEntry.prototype=edges.newComponent(e),new edges.MultiDateRangeEntry(e)},MultiDateRangeEntry:function(e){this.fields=e.fields||[],this.earliest=e.earliest||{},this.latest=e.latest||{},this.category=e.category||"selector",this.defaultEarliest=e.defaultEarliest||new Date(0),this.defaultLatest=e.defaultLatest||new Date,this.defaultRenderer=e.defaultRenderer||"newMultiDateRangeRenderer",this.currentField=!1,this.fromDate=!1,this.toDate=!1,this.touched=!1,this.dateOptions={},this.init=function(e){Object.getPrototypeOf(this).init.call(this,e),this.currentField=this.fields[0].field,this.lastField=!1,this.loadDates()},this.changeField=function(e){this.lastField=this.currentField,e!==this.currentField&&(this.touched=!0,this.currentField=e)},this.setFrom=function(e){e!==this.fromDate&&(this.touched=!0,this.fromDate=e)},this.setTo=function(e){e!==this.toDate&&(this.touched=!0,this.toDate=e)},this.triggerSearch=function(){if(this.touched){this.touched=!1;var e=this.edge.cloneQuery();if(e.removeMust(es.newRangeFilter({field:this.lastField})),!this.currentField||!this.toDate&&!this.fromDate)return;var t={field:this.currentField};this.toDate&&(t.lt=this.toDate),this.fromDate&&(t.gte=this.fromDate),e.addMust(es.newRangeFilter(t)),this.edge.pushQuery(e),this.edge.doQuery()}},this.loadDates=function(){for(var e=0;e<this.fields.length;e++){var t=this.fields[e].field,i=this.earliest[t],s=this.latest[t],r=this.defaultEarliest;i&&(r=i());var n=this.defaultLatest;s&&(n=s()),this.dateOptions[t]={earliest:r,latest:n}}},this.currentEarliest=function(){return this.currentField&&this.dateOptions[this.currentField]?this.dateOptions[this.currentField].earliest:void 0},this.currentLatest=function(){return this.currentField&&this.dateOptions[this.currentField]?this.dateOptions[this.currentField].latest:void 0}}});