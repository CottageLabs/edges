$.extend(edges,{newMapView:function(t){return t||(t={}),edges.MapView.prototype=edges.newComponent(t),new edges.MapView(t)},MapView:function(t){this.geoPoint=t.geoPoint||"location",this.structure=t.structure||"properties",this.calculateCentre=t.calculateCentre||edges.MapCentreFunctions.pickFirst,this.defaultRenderer=t.defaultRenderer||"newMapViewRenderer",this.locations=[],this.centre={lat:17,lon:0},this.synchronise=function(){if(this.locations=[],this.centre={lat:17,lon:0},this.edge.result)for(var t=this.edge.result.results(),e=0;e<t.length;e++){var n=t[e],i=this._getGeoPoint(n);if(i){var o=this._getLatLon(i);o.obj=n,this.locations.push(o)}}this.locations.length>0&&(this.centre=this.calculateCentre(this.locations))},this._getLatLon=function(t){var e={};return"properties"===this.structure&&(e.lat=parseFloat(t.lat),e.lon=parseFloat(t.lon)),e},this._getGeoPoint=function(t){for(var e=this.geoPoint.split("."),n=t,i=0;i<e.length;i++){var o=e[i],s=i<e.length-1?{}:!1;n=void 0!==n[o]?n[o]:s}return n}},MapCentreFunctions:{pickFirst:function(t){return{lat:t[0].lat,lon:t[0].lon}}}});