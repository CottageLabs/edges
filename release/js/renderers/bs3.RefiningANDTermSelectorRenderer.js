$.extend(!0,edges,{bs3:{newRefiningANDTermSelectorRenderer:function(e){return e||(e={}),edges.bs3.RefiningANDTermSelectorRenderer.prototype=edges.newRenderer(e),new edges.bs3.RefiningANDTermSelectorRenderer(e)},RefiningANDTermSelectorRenderer:function(e){this.hideInactive=e.hideInactive||!1,this.controls=e.controls||!0,this.open=e.open||!1,this.showSelected=e.showSelected||!0,this.sortCycle=e.sortCycle||["count desc","count asc","term desc","term asc"],this.namespace="edges-bs3-refiningand-term-selector",this.draw=function(){var e=this.component,s=this.namespace,t=edges.css_classes(s,"result",this),i=edges.css_classes(s,"value",this),n=edges.css_classes(s,"controls",this),o=edges.css_classes(s,"filter-remove",this),c=edges.css_classes(s,"facet",this),r=edges.css_classes(s,"header",this),l=edges.css_id(s,"controls",this),d=edges.css_id(s,"size",this),a=edges.css_id(s,"order",this),h=edges.css_id(s,"toggle",this),g=edges.css_id(s,"results",this),p="Loading...";if(e.values.length>0){p="";for(var m=[],v=0;v<e.filters.length;v++)m.push(e.filters[v].term.toString());for(var v=0;v<e.values.length;v++){var u=e.values[v];-1===$.inArray(u.term.toString(),m)&&(p+='<div class="'+t+'"><a href="#" class="'+i+'" data-key="'+edges.escapeHtml(u.term)+'">'+edges.escapeHtml(u.display)+"</a> ("+u.count+")</div>")}}var y="";if(this.controls){y='<div class="'+n+'" style="display:none" id="'+l+'"><div class="row">                         <div class="col-md-12">                            <div class="btn-group">                                <button type="button" class="btn btn-default btn-sm" id="'+d+'" title="List Size" href="#">0</button>                                 <button type="button" class="btn btn-default btn-sm" id="'+a+'" title="List Order" href="#"></button>                             </div>                        </div>                    </div></div>'}var f="";if(e.filters.length>0&&this.showSelected)for(var v=0;v<e.filters.length;v++){var _=e.filters[v];f+='<div class="'+t+'"><strong>'+edges.escapeHtml(_.display)+"&nbsp;",f+='<a href="#" class="'+o+'" data-key="'+edges.escapeHtml(_.term)+'">',f+='<i class="glyphicon glyphicon-black glyphicon-remove"></i></a>',f+="</strong></a></div>"}var S='<div class="'+c+'">                        <div class="'+r+'"><div class="row">                             <div class="col-md-12">                                <a href="#" id="'+h+'"><i class="glyphicon glyphicon-plus"></i>&nbsp;'+e.display+'</a>                            </div>                        </div></div>                        {{CONTROLS}}                        <div class="row" style="display:none" id="'+g+'">                            <div class="col-md-12">                                {{SELECTED}}                                {{RESULTS}}                            </div>                        </div></div>';S=S.replace(/{{RESULTS}}/g,p).replace(/{{CONTROLS}}/g,y).replace(/{{SELECTED}}/g,f),e.context.html(S),this.setUISize(),this.setUISort(),this.setUIOpen();var b=edges.css_class_selector(s,"value",this),w=edges.css_class_selector(s,"filter-remove",this),z=edges.css_id_selector(s,"toggle",this),C=edges.css_id_selector(s,"size",this),R=edges.css_id_selector(s,"order",this);edges.on(b,"click",this,"termSelected"),edges.on(z,"click",this,"toggleOpen"),edges.on(w,"click",this,"removeFilter"),edges.on(C,"click",this,"changeSize"),edges.on(R,"click",this,"changeSort")},this.setUIOpen=function(){var e=edges.css_id_selector(this.namespace,"results",this),s=edges.css_id_selector(this.namespace,"controls",this),t=edges.css_id_selector(this.namespace,"toggle",this),i=this.component.jq(e),n=this.component.jq(s),o=this.component.jq(t);this.open?(o.find("i").removeClass("glyphicon-plus").addClass("glyphicon-minus"),n.show(),i.show()):(o.find("i").removeClass("glyphicon-minus").addClass("glyphicon-plus"),n.hide(),i.hide())},this.setUISize=function(){var e=edges.css_id_selector(this.namespace,"size",this);this.component.jq(e).html(this.component.size)},this.setUISort=function(){var e=edges.css_id_selector(this.namespace,"order",this),s=this.component.jq(e);"count"===this.component.orderBy?"asc"===this.component.orderDir?s.html('count <i class="glyphicon glyphicon-arrow-down"></i>'):"desc"===this.component.orderDir&&s.html('count <i class="glyphicon glyphicon-arrow-up"></i>'):"term"===this.component.orderBy&&("asc"===this.component.orderDir?s.html('a-z <i class="glyphicon glyphicon-arrow-down"></i>'):"desc"===this.component.orderDir&&s.html('a-z <i class="glyphicon glyphicon-arrow-up"></i>'))},this.termSelected=function(e){var s=this.component.jq(e).attr("data-key");this.component.selectTerm(s)},this.removeFilter=function(e){var s=this.component.jq(e).attr("data-key");this.component.removeFilter(s)},this.toggleOpen=function(e){this.open=!this.open,this.setUIOpen()},this.changeSize=function(e){var s=prompt("Currently displaying "+this.component.size+" results per page. How many would you like instead?");s&&this.component.changeSize(parseInt(s))},this.changeSort=function(e){var s=this.component.orderBy+" "+this.component.orderDir,t=$.inArray(s,this.sortCycle),i=this.sortCycle[(t+1)%4],n=i.split(" ");this.component.changeSort(n[0],n[1])}}}});