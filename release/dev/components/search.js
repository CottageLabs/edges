$.extend(edges,{newFullSearchController:function(e){return e||(e={}),edges.FullSearchController.prototype=edges.newComponent(e),new edges.FullSearchController(e)},FullSearchController:function(e){this.fuzzify=e.fuzzify||!1,this.sortOptions=e.sortOptions||!1,this.fieldOptions=e.fieldOptions||!1,this.urlShortener=e.urlShortener||!1,this.defaultOperator=e.defaultOperator||"OR",this.defaultRenderer=e.defaultRenderer||"newFullSearchControllerRenderer",this.searchField=!1,this.searchString=!1,this.sortBy=!1,this.sortDir="desc",this.shortUrl=!1,this.synchronise=function(){if(this.searchString=!1,this.searchField=!1,this.sortBy=!1,this.sortDir="desc",this.edge.currentQuery){var e=this.edge.currentQuery.getQueryString();e&&(this.searchString=e.queryString,this.searchField=e.defaultField);var t=this.edge.currentQuery.getSortBy();t.length>0&&(this.sortBy=t[0].field,this.sortDir=t[0].order)}},this.changeSortDir=function(){var e="asc"===this.sortDir?"desc":"asc",t=this.sortBy?this.sortBy:"_score",s=this.edge.cloneQuery();s.setSortBy(es.newSort({field:t,order:e})),s.from=0,this.edge.pushQuery(s),this.edge.doQuery()},this.setSortBy=function(e){var t=this.edge.cloneQuery();e&&""!==e||(e="_score"),t.setSortBy(es.newSort({field:e,order:this.sortDir})),t.from=0,this.edge.pushQuery(t),this.edge.doQuery()},this.setSearchField=function(e){if(this.searchField=e,this.searchString&&""!==this.searchString){var t=this.edge.cloneQuery();t.setQueryString(es.newQueryString({queryString:this.searchString,defaultField:e,defaultOperator:this.defaultOperator,fuzzify:this.fuzzify})),t.from=0,this.edge.pushQuery(t),this.edge.doQuery()}},this.setSearchText=function(e){var t=this.edge.cloneQuery();if(""!==e){var s={queryString:e,defaultOperator:this.defaultOperator,fuzzify:this.fuzzify};this.searchField&&""!==this.searchField&&(s.defaultField=this.searchField),t.setQueryString(es.newQueryString(s))}else t.removeQueryString();t.from=0,this.edge.pushQuery(t),this.edge.doQuery()},this.clearSearch=function(){this.edge.reset()}},newSelectedFilters:function(e){return e||(e={}),edges.SelectedFilters.prototype=edges.newComponent(e),new edges.SelectedFilters(e)},SelectedFilters:function(e){this.fieldDisplays=e.fieldDisplays||{},this.valueMaps=e.valueMaps||{},this.valueFunctions=e.valueFunctions||{},this.rangeMaps=e.rangeMaps||{},this.formatUnknownRange=e.formatUnknownRange||!1,this.defaultRenderer=e.defaultRenderer||"newSelectedFiltersRenderer",this.mustFilters={},this.synchronise=function(){this.mustFilters={};for(var e=this.edge.currentQuery.listMust(),t=0;t<e.length;t++){var s=e[t];"term"===s.type_name?this._synchronise_term(s):"terms"===s.type_name?this._synchronise_terms(s):"range"===s.type_name?this._synchronise_range(s):"geo_distance_range"===s.type_name}},this.removeFilter=function(e,t,s,i){var r=this.edge.cloneQuery();if("term"===t){var n=es.newTermFilter({field:s,value:i});"must"===e&&r.removeMust(n)}else if("terms"===t){var n=es.newTermsFilter({field:s});if("must"===e)for(var h=r.listMust(n),a=0;a<h.length;a++)h[a].has_term(i)&&h[a].remove_term(i),h[a].has_terms()||r.removeMust(h[a])}else if("range"==t){var o={field:s};i.to&&(o.lt=i.to),i.from&&(o.gte=i.from);var n=es.newRangeFilter(o);"must"===e&&r.removeMust(n)}r.from=0,this.edge.pushQuery(r),this.edge.doQuery()},this._synchronise_term=function(e){var t=this.fieldDisplays[e.field]||e.field;e.field in this.mustFilters?this.mustFilters[e.field].values.push({val:e.value,display:this._translate(e.field,e.value)}):this.mustFilters[e.field]={filter:e.type_name,display:t,values:[{val:e.value,display:this._translate(e.field,e.value)}],rel:"AND"}},this._synchronise_terms=function(e){for(var t=this.fieldDisplays[e.field]||e.field,s=[],i=0;i<e.values.length;i++){var r=e.values[i],n=this._translate(e.field,r);s.push({val:r,display:n})}this.mustFilters[e.field]={filter:e.type_name,display:t,values:s,rel:"OR"}},this._synchronise_range=function(e){var t=this.fieldDisplays[e.field]||e.field,s=e.lt,i=e.gte,r=this._getRangeDef(e.field,i,s),n=[];r?n.push(r):n.push({to:s,from:i,display:this._formatUnknown(i,s)}),this.mustFilters[e.field]={filter:e.type_name,display:t,values:n}},this._translate=function(e,t){if(e in this.valueMaps){if(t in this.valueMaps[e])return this.valueMaps[e][t]}else if(e in this.valueFunctions)return this.valueFunctions[e](t);return t},this._getRangeDef=function(e,t,s){if(!this.rangeMaps[e])return!1;for(var i=0;i<this.rangeMaps[e].length;i++){var r=this.rangeMaps[e][i],n=!0,h=!0;if((t&&!r.from||!t&&r.from)&&(n=!1),(s&&!r.to||!s&&r.to)&&(h=!1),t&&r.from&&t!==r.from&&(n=!1),s&&r.to&&s!==r.to&&(h=!1),n&&h)return r}return!1},this._formatUnknown=function(e,t){if(this.formatUnknownRange)return this.formatUnknownRange(e,t);if((e||t)&&e===t)return e;var s="";return s+=e?e:"< ",t?s+=e?" - "+t:t:e?s+="+":s="unknown",s}},newPager:function(e){return e||(e={}),edges.Pager.prototype=edges.newComponent(e),new edges.Pager(e)},Pager:function(e){this.defaultRenderer=e.defaultRenderer||"newPagerRenderer",this.from=!1,this.to=!1,this.total=!1,this.page=!1,this.pageSize=!1,this.totalPages=!1,this.synchronise=function(){this.from=!1,this.to=!1,this.total=!1,this.page=!1,this.pageSize=!1,this.totalPages=!1,this.edge.currentQuery&&(this.from=parseInt(this.edge.currentQuery.getFrom())+1,this.pageSize=parseInt(this.edge.currentQuery.getSize())),this.edge.result&&(this.total=this.edge.result.total()),this.from!==!1&&this.total!==!1&&(this.to=this.from+this.pageSize-1,this.page=Math.ceil((this.from-1)/this.pageSize)+1,this.totalPages=Math.ceil(this.total/this.pageSize))},this.setFrom=function(e){var t=this.edge.cloneQuery();e-=1,0>e&&(e=0),t.from=e,this.edge.pushQuery(t),this.edge.doQuery()},this.setSize=function(e){var t=this.edge.cloneQuery();t.size=e,this.edge.pushQuery(t),this.edge.doQuery()},this.decrementPage=function(){var e=this.from-this.pageSize;this.setFrom(e)},this.incrementPage=function(){var e=this.from+this.pageSize;this.setFrom(e)}},newSearchingNotification:function(e){return e||(e={}),edges.SearchingNotification.prototype=edges.newComponent(e),new edges.SearchingNotification(e)},SearchingNotification:function(e){this.defaultRenderer=e.defaultRenderer||"newSearchingNotificationRenderer",this.searching=!1,this.init=function(e){Object.getPrototypeOf(this).init.call(this,e),e.context.on("edges:pre-query",edges.eventClosure(this,"searchingBegan")),e.context.on("edges:query-fail",edges.eventClosure(this,"searchingFinished")),e.context.on("edges:query-success",edges.eventClosure(this,"searchingFinished"))},this.draw=function(){},this.searchingBegan=function(){this.searching=!0,this.renderer.draw()},this.searchingFinished=function(){this.searching=!1,this.renderer.draw()}},newResultsDisplay:function(e){return e||(e={}),edges.ResultsDisplay.prototype=edges.newComponent(e),new edges.ResultsDisplay(e)},ResultsDisplay:function(e){this.category=e.category||"results",this.defaultRenderer=e.defaultRenderer||"newResultsDisplayRenderer",this.results=!1,this.synchronise=function(){this.results=[],this.edge.result&&(this.results=this.edge.result.results())}}});